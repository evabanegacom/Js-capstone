{"code":"!function(e){var s={};function t(n){if(s[n])return s[n].exports;var i=s[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=s,t.d=function(e,s,n){t.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,s){if(1&s&&(e=t(e)),8&s)return e;if(4&s&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&s&&\"string\"!=typeof e)for(var i in e)t.d(n,i,function(s){return e[s]}.bind(null,i));return n},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,\"a\",s),s},t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},t.p=\"\",t(t.s=0)}([function(e,s){!function(e){var s,t,n,i,a,o,r,d=document.getElementById(\"canvas\"),u=d.getContext(\"2d\"),h=[],m=[],g=[],l=[],p=d.height-32,c=\"localStorage\"in window&&null!==window.localStorage;function f(e,s){return Math.floor(Math.random()*(s-e+1)+e)}function w(e,s,t){return Math.max(Math.min(e,t),s)}c&&((r=\"true\"===localStorage.getItem(\"kandi.playSound\"))?e(\".sound\").addClass(\"sound-on\").removeClass(\"sound-off\"):e(\".sound\").addClass(\"sound-off\").removeClass(\"sound-on\"));var y=function(){this.imgs={bg:\"imgs/bg.png\",sky:\"imgs/sky.png\",backdrop:\"imgs/backdrop.png\",backdrop2:\"imgs/backdrop_ground.png\",grass:\"imgs/grass.png\",avatar_normal:\"imgs/normal_walk.png\",water:\"imgs/water.png\",grass1:\"imgs/grassMid1.png\",grass2:\"imgs/grassMid2.png\",bridge:\"imgs/bridge.png\",plant:\"imgs/plant.png\",bush1:\"imgs/bush1.png\",bush2:\"imgs/bush2.png\",cliff:\"imgs/grassCliffRight.png\",spikes:\"imgs/spikes.png\",box:\"imgs/boxCoin.png\",slime:\"imgs/slime.png\"},this.sounds={bg:\"sounds/bg.mp3\",jump:\"sounds/jump.mp3\",gameOver:\"sounds/gameOver.mp3\"};var e=0,s=Object.keys(this.imgs).length;Object.keys(this.sounds).length;function t(s,t){\"loading\"===this[s][t].status&&(this[s][t].status=\"loaded\",e++,\"function\"==typeof this.progress&&this.progress(e,this.totalAssest),e===this.totalAssest&&\"function\"==typeof this.finished&&this.finished())}function n(e){\"loading\"===this.sounds[e].status&&4===this.sounds[e].readyState&&t.call(this,\"sounds\",e)}return this.totalAssest=s,this.downloadAll=function(){var e;for(var s in this.imgs)this.imgs.hasOwnProperty(s)&&(e=this.imgs[s],function(s,n){s.imgs[n]=new Image,s.imgs[n].status=\"loading\",s.imgs[n].name=n,s.imgs[n].onload=function(){t.call(s,\"imgs\",n)},s.imgs[n].src=e}(this,s));for(var i in this.sounds)this.sounds.hasOwnProperty(i)&&(e=this.sounds[i],function(s,t){s.sounds[t]=new Audio,s.sounds[t].status=\"loading\",s.sounds[t].name=t,s.sounds[t].addEventListener(\"canplay\",(function(){n.call(s,t)})),s.sounds[t].src=e,s.sounds[t].preload=\"auto\",s.sounds[t].load()}(this,i))},{imgs:this.imgs,sounds:this.sounds,totalAssest:this.totalAssest,downloadAll:this.downloadAll}}();function v(e,s,t){this.image=new Image,this.frameWidth=s,this.frameHeight=t;var n=this;this.image.onload=function(){n.framesPerRow=Math.floor(n.image.width/n.frameWidth)},this.image.src=e}function x(e,s,t,n){for(var i=[],a=0,o=0,r=t;r<=n;r++)i.push(r);this.update=function(){o==s-1&&(a=(a+1)%i.length),o=(o+1)%s},this.draw=function(s,t){var n=Math.floor(i[a]/e.framesPerRow),o=Math.floor(i[a]%e.framesPerRow);u.drawImage(e.image,o*e.frameWidth,n*e.frameHeight,e.frameWidth,e.frameHeight,s,t,e.frameWidth,e.frameHeight)}}y.progress=function(e,s){var t=document.getElementById(\"progress-bar\");t.value=e/s,document.getElementById(\"p\").innerHTML=Math.round(100*t.value)+\"%\"},y.finished=function(){!function(){for(var s in y.sounds)y.sounds.hasOwnProperty(s)&&(y.sounds[s].muted=!r);e(\"#progress\").hide(),e(\"#main\").show(),e(\"#menu\").addClass(\"main\"),e(\".sound\").show()}()};var b=function(){var e={},s={},t={};return this.draw=function(){u.drawImage(y.imgs.bg,0,0),e.x-=e.speed,s.x-=s.speed,t.x-=t.speed,u.drawImage(y.imgs.sky,e.x,e.y),u.drawImage(y.imgs.sky,e.x+d.width,e.y),u.drawImage(y.imgs.backdrop,s.x,s.y),u.drawImage(y.imgs.backdrop,s.x+d.width,s.y),u.drawImage(y.imgs.backdrop2,t.x,t.y),u.drawImage(y.imgs.backdrop2,t.x+d.width,t.y),e.x+y.imgs.sky.width<=0&&(e.x=0),s.x+y.imgs.backdrop.width<=0&&(s.x=0),t.x+y.imgs.backdrop2.width<=0&&(t.x=0)},this.reset=function(){e.x=0,e.y=0,e.speed=.2,s.x=0,s.y=0,s.speed=.4,t.x=0,t.y=0,t.speed=.6},{draw:this.draw,reset:this.reset}}();function k(e,s,t,n){this.x=e||0,this.y=s||0,this.dx=t||0,this.dy=n||0}k.prototype.advance=function(){this.x+=this.dx,this.y+=this.dy},k.prototype.minDist=function(e){var s,t,n,i=1/0,a=1/Math.max(Math.abs(this.dx),Math.abs(this.dy),Math.abs(e.dx),Math.abs(e.dy)),o={},r={};o.x=this.x+this.width/2,o.y=this.y+this.height/2,r.x=e.x+e.width/2,r.y=e.y+e.height/2;for(var d=0;d<1;d+=a)n=(s=o.x+this.dx*d-(r.x+e.dx*d))*s+(t=o.y+this.dy*d-(r.y+e.dy*d))*t,i=Math.min(i,n);return Math.sqrt(i)};var M=function(e){e.width=60,e.height=96,e.speed=6,e.gravity=1,e.dy=0,e.jumpDy=-10,e.isFalling=!1,e.isJumping=!1,e.sheet=new v(\"imgs/normal_walk.png\",e.width,e.height),e.walkAnim=new x(e.sheet,4,0,15),e.jumpAnim=new x(e.sheet,4,15,15),e.fallAnim=new x(e.sheet,4,11,11),e.anim=e.walkAnim,k.call(e,0,0,0,e.dy);var s=0;return e.update=function(){P.space&&0===e.dy&&!e.isJumping&&(e.isJumping=!0,e.dy=e.jumpDy,s=12,y.sounds.jump.play()),P.space&&s&&(e.dy=e.jumpDy),s=Math.max(s-1,0),this.advance(),(e.isFalling||e.isJumping)&&(e.dy+=e.gravity),e.dy>0?e.anim=e.fallAnim:e.dy<0?e.anim=e.jumpAnim:e.anim=e.walkAnim,e.anim.update()},e.draw=function(){e.anim.draw(e.x,e.y)},e.reset=function(){e.x=64,e.y=250},e}(Object.create(k.prototype));function A(e,s,t){this.x=e,this.y=s,this.width=32,this.height=32,this.type=t,k.call(this,e,s,0,0),this.update=function(){this.dx=-M.speed,this.advance()},this.draw=function(){u.save(),u.translate(.5,.5),u.drawImage(y.imgs[this.type],this.x,this.y),u.restore()}}function C(){var e;switch(i){case 0:case 1:e=Math.random()>.5?\"grass1\":\"grass2\";break;case 2:e=\"grass\";break;case 3:e=\"bridge\";break;case 4:e=\"box\"}return 1===a&&i<3&&0===f(0,3)&&(e=\"cliff\"),e}function O(){if(s++,o>0)o--;else if(a>0){var e=C();h.push(new A(d.width+32%M.speed,p-64*i,e)),a--,s>40&&0===f(0,20)&&i<3&&(Math.random()>.5?l.push(new A(d.width+32%M.speed,p-64*i-32,\"plant\")):a>2&&(l.push(new A(d.width+32%M.speed,p-64*i-32,\"bush1\")),l.push(new A(d.width+32%M.speed+32,p-64*i-32,\"bush2\")))),s>100&&Math.random()>.96&&g.length<3&&a>5&&(!g.length||d.width-g[g.length-1].x>=96||d.width-g[g.length-1].x<32)&&g.push(new A(d.width+32%M.speed,p-64*i-32,Math.random()>.5?\"spikes\":\"slime\"))}else o=f(M.speed-2,M.speed),i=w(f(0,i+f(0,2)),0,4),a=f(Math.floor(M.speed/2),4*M.speed)}function j(){if(!t){if(_(j),u.clearRect(0,0,d.width,d.height),b.draw(),function(){for(var e=0;e<m.length;e++)m[e].update(),m[e].draw();if(m[0]&&m[0].x<-32){var s=m.splice(0,1)[0];s.x=m[m.length-1].x+32,m.push(s)}}(),function(){for(var e=0;e<l.length;e++)l[e].update(),l[e].draw();l[0]&&l[0].x<-32&&l.splice(0,1)}(),M.update(),M.draw(),M.y+M.height>=d.height&&R(),function(){M.isFalling=!0;for(var e=0;e<h.length;e++){var s;h[e].update(),h[e].draw(),M.minDist(h[e])<=M.height/2+16&&(s=180*Math.atan2(M.y-h[e].y,M.x-h[e].x)/Math.PI)>-130&&s<-50&&(M.isJumping=!1,M.isFalling=!1,M.y=h[e].y-M.height+5,M.dy=0)}h[0]&&h[0].x<-32&&h.splice(0,1)}(),function(){for(var e=0;e<g.length;e++)g[e].update(),g[e].draw(),M.minDist(g[e])<=M.width-16&&R();g[0]&&g[0].x<-32&&g.splice(0,1)}(),u.fillText(\"Score: \"+s+\"m\",d.width-140,30),n%Math.floor(32/M.speed)==0&&O(),n>Math.floor(32/M.speed)*M.speed*20&&0!==M.dy&&(M.speed=w(++M.speed,0,15),M.walkAnim.frameSpeed=Math.floor(32/M.speed)-1,n=0,0===o)){var e=C();h.push(new A(d.width+32%M.speed,p-64*i,e)),a--}n++}}A.prototype=Object.create(k.prototype);var I={32:\"space\"},P={};for(var S in I)I.hasOwnProperty(S)&&(P[I[S]]=!1);document.onkeydown=function(e){var s=e.keyCode?e.keyCode:e.charCode;I[s]&&(e.preventDefault(),P[I[s]]=!0)},document.onkeyup=function(e){var s=e.keyCode?e.keyCode:e.charCode;I[s]&&(e.preventDefault(),P[I[s]]=!1)};var _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,s){window.setTimeout(e,1e3/60)};function F(){document.getElementById(\"game-over\").style.display=\"none\",h=[],m=[],l=[],g=[],M.reset(),n=0,t=!1,s=0,i=2,a=15,o=0,u.font=\"16px arial, sans-serif\";for(var e=0;e<30;e++)h.push(new A(29*e,p-64*i,\"grass\"));for(e=0;e<d.width/32+2;e++)m.push(new A(32*e,p,\"water\"));b.reset(),j(),y.sounds.gameOver.pause(),y.sounds.bg.currentTime=0,y.sounds.bg.loop=!0,y.sounds.bg.play()}function R(){t=!0,e(\"#score\").html(s),e(\"#game-over\").show(),y.sounds.bg.pause(),y.sounds.gameOver.currentTime=0,y.sounds.gameOver.play()}e(\".credits\").click((function(){e(\"#main\").hide(),e(\"#credits\").show(),e(\"#menu\").addClass(\"credits\")})),e(\".back\").click((function(){e(\"#credits\").hide(),e(\"#main\").show(),e(\"#menu\").removeClass(\"credits\")})),e(\".sound\").click((function(){var s=e(this);for(var t in s.hasClass(\"sound-on\")?(s.removeClass(\"sound-on\").addClass(\"sound-off\"),r=!1):(s.removeClass(\"sound-off\").addClass(\"sound-on\"),r=!0),c&&localStorage.setItem(\"kandi.playSound\",r),y.sounds)y.sounds.hasOwnProperty(t)&&(y.sounds[t].muted=!r)})),e(\".play\").click((function(){e(\"#menu\").hide(),F()})),e(\".restart\").click((function(){e(\"#game-over\").hide(),F()})),y.downloadAll()}(jQuery)}]);","extractedComments":[]}